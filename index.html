<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Neuron of Intelligence — Minimal</title>
<style>
  :root{
    --bg:#0a0f1c; --panel:#111726; --ink:#e6edf3; --dim:#9aa7b4;
    --line:#2b3347; --accent:#7ff0d9; --halo:rgba(127,240,217,.12);
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{background:var(--bg);color:var(--ink);font:14px/1.5 Inter, system-ui,-apple-system,Segoe UI,Roboto,Arial;overflow:hidden}

  .wrap{display:flex;height:100%}
  .stage{flex:1;display:flex;align-items:center;justify-content:center;padding:16px;min-width:0}
  .panel{width:360px;max-width:42vw;background:var(--panel);border-left:1px solid var(--line);padding:18px 18px 72px;overflow:auto}
  .panel .ghost{color:#6b7280;text-align:center;margin-top:20vh;font-style:italic}

  .card{background:#0d1324;border:1px solid #2a364d;border-radius:10px;padding:16px;margin:10px 0;opacity:0;transform:translateY(6px);transition:.25s ease}
  .card h3{font-size:14px;font-weight:800;color:#bfe8ff;margin-bottom:6px}
  .card p{color:#b7c8cf}
  .card.active{opacity:1;transform:none;box-shadow:0 0 0 1px var(--halo), 0 0 24px var(--halo)}
  .small{font-size:12px;color:var(--dim)}

  .ctrls{position:fixed;right:16px;bottom:16px;display:flex;gap:8px;align-items:center}
  .btn{appearance:none;border:1px solid var(--line);background:#0d1324;color:var(--ink);padding:10px 14px;border-radius:12px;cursor:pointer}
  .btn:hover{border-color:#3a4a67}
  .chip{font-size:12px;padding:8px 10px}
  .step{font-variant-numeric:tabular-nums}

  .fab{position:fixed;top:16px;right:16px}
  .fab .btn{border-radius:999px;padding:10px 14px}
  .menu{position:absolute;top:48px;right:0;background:var(--panel);border:1px solid var(--line);border-radius:12px;overflow:hidden;min-width:260px;display:none;z-index:10}
  .menu a,.menu button{display:block;width:100%;text-align:left;background:none;border:0;color:var(--ink);padding:10px 12px;cursor:pointer}
  .menu a:hover,.menu button:hover{background:#0d1324}
  .show{display:block}

  svg{max-width:100%;max-height:92vh}
  .wire{fill:none;stroke-linecap:round;stroke-width:3;opacity:.85}
  .node{fill:#111726;stroke-width:2}
  .label{fill:#fff;font:700 12px/1 Inter, system-ui, Arial}
  .text{fill:#e6edf3;font:600 11px/1 Inter, system-ui, Arial}
  .hot{filter:brightness(1.4) drop-shadow(0 0 10px var(--accent))}
  .clickable{cursor:pointer;transition:.2s ease}
  .clickable:hover{filter:brightness(1.2)}
  @media (max-width:1000px){
    .wrap{flex-direction:column}
    .panel{width:100%;max-width:100%;max-height:44vh}
    body{overflow:auto}
  }
</style>
</head>
<body>

<div class="wrap">
  <div class="stage">
    <!-- === Diagram === -->
    <svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg" aria-label="Neuron of Intelligence">
      <defs>
        <marker id="arrow" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
          <path d="M0,0 L6,3 L0,6 Z" fill="#7ff0d9"/>
        </marker>
        <linearGradient id="axonGrad" x1="0" y1="0" x2="1" y2="0">
          <stop offset="0%" stop-color="#8ab4ff"/><stop offset="100%" stop-color="#7ff0d9"/>
        </linearGradient>
      </defs>

      <rect fill="#0a0f1c" width="800" height="600"/>
      <text class="label" x="400" y="26" text-anchor="middle" style="font-size:16px">NEURON OF INTELLIGENCE</text>

      <!-- Afferents -->
      <g class="clickable part" data-key="sociology">
        <path class="wire" stroke="#ff7f9a" d="M400,100 Q390,150 400,200" marker-end="url(#arrow)"/>
        <circle cx="400" cy="80" r="18" fill="#87ceeb" stroke="#ffffff" stroke-width="2"/>
        <text class="text" x="400" y="86" text-anchor="middle" fill="#000">LOVE</text>
        <text class="label" x="400" y="50" text-anchor="middle">SOCIOLOGY</text>
      </g>
      <g class="clickable part" data-key="biology">
        <path class="wire" stroke="#4ecdc4" d="M200,300 Q300,290 350,300" marker-end="url(#arrow)"/>
        <circle cx="180" cy="300" r="18" fill="#ffb6c1" stroke="#ffffff" stroke-width="2"/>
        <text class="text" x="180" y="306" text-anchor="middle" fill="#000">HOPE</text>
        <text class="label" x="120" y="300" text-anchor="middle">BIOLOGY</text>
      </g>
      <g class="clickable part" data-key="physics">
        <path class="wire" stroke="#98e07d" d="M400,500 Q390,450 400,400" marker-end="url(#arrow)"/>
        <circle cx="400" cy="520" r="18" fill="#a1f0b2" stroke="#ffffff" stroke-width="2"/>
        <text class="text" x="400" y="526" text-anchor="middle" fill="#000">FAITH</text>
        <text class="label" x="400" y="550" text-anchor="middle">PHYSICS</text>
      </g>

      <!-- Soma -->
      <g class="clickable part" data-key="soma">
        <circle class="node" cx="400" cy="300" r="50" fill="#10182e" stroke="#7ff0d9" stroke-width="3"/>
        <text class="label" x="400" y="298" text-anchor="middle">SOMA</text>
        <text class="text" x="400" y="314" text-anchor="middle">splice(F,H,L)</text>
      </g>

      <!-- Axon + Effectors -->
      <g class="clickable part" data-key="axon">
        <path class="wire" stroke="url(#axonGrad)" stroke-width="8" d="M450,300 L580,300"/>
      </g>
      <g class="clickable part" data-key="effectors">
        <path class="wire" stroke="#c7d4ff" stroke-width="4" d="M580,300 L650,250" marker-end="url(#arrow)"/>
        <path class="wire" stroke="#c7d4ff" stroke-width="4" d="M580,300 L650,300" marker-end="url(#arrow)"/>
        <path class="wire" stroke="#c7d4ff" stroke-width="4" d="M580,300 L650,350" marker-end="url(#arrow)"/>
      </g>
    </svg>
  </div>

  <!-- === Details Panel === -->
  <aside class="panel" id="panel">
    <div class="ghost" id="ghost">Click any element—or press <b>Next</b>—to step through the neuron.</div>
    <div class="card" data-card="physics"><h3>PHYSICS / FAITH</h3><p>Thermodynamics as bedrock.</p></div>
    <div class="card" data-card="biology"><h3>BIOLOGY / HOPE</h3><p>Ritual & fractals; emergent coordination.</p></div>
    <div class="card" data-card="sociology"><h3>SOCIOLOGY / LOVE</h3><p>Tribal meaning-making.</p></div>
    <div class="card" data-card="soma"><h3>SOMA — Integration Hub</h3><p>splice(F,H,L) → unified signal.</p></div>
    <div class="card" data-card="axon"><h3>AXON</h3><p>All-or-nothing commit.</p></div>
    <div class="card" data-card="effectors"><h3>EFFECTORS</h3><p>Cell → system → grid actions.</p></div>
  </aside>
</div>

<!-- Controls -->
<div class="ctrls">
  <span class="chip btn step" id="stepLabel">Stage 0/6</span>
  <button class="btn" id="prevBtn">Prev</button>
  <button class="btn" id="nextBtn">Next</button>
  <button class="btn" id="resetBtn">Reset</button>
</div>

<!-- Read Menu -->
<div class="fab">
  <button class="btn" id="readBtn">Read ▾</button>
  <div class="menu" id="readMenu">
    <a href="https://cryo-pyro.github.io/t/" target="_blank" rel="noopener">Essay (site: /t/)</a>
    <a href="https://cryo-pyro.github.io/int/" target="_blank" rel="noopener">Neuron page (site: /int/)</a>
    <a href="neuron/orthogonal-integration.html" target="_blank" rel="noopener">Orthogonal Inputs (soma)</a>
    <a href="neuron/symbolic-alignment.html" target="_blank" rel="noopener">Symbolic Chain Alignment</a>
    <button type="button" id="openOrth">Open Orthogonal Inputs in panel</button>
    <button type="button" id="openAlign">Open Symbolic Alignment in panel</button>
  </div>
</div>

<script>
(() => {
  const order = ["physics","biology","sociology","soma","axon","effectors"];
  let idx=-1;
  const cards=[...document.querySelectorAll('.card')];
  const parts=[...document.querySelectorAll('.part')];
  const ghost=document.getElementById('ghost');
  const stepLabel=document.getElementById('stepLabel');
  const readBtn=document.getElementById('readBtn');
  const readMenu=document.getElementById('readMenu');

  function clearActive(){cards.forEach(c=>c.classList.remove('active'));parts.forEach(p=>p.classList.remove('hot'));}
  function show(key){clearActive();const card=document.querySelector(\`.card[data-card="\${key}"]\`);const part=document.querySelector(\`.part[data-key="\${key}"]\`);if(card) card.classList.add('active');if(part) part.classList.add('hot');if(ghost) ghost.style.display='none';stepLabel.textContent=\`Stage \${Math.max(idx+1,0)}/\${order.length}\`;}
  function reset(){idx=-1;clearActive();ghost.style.display='block';stepLabel.textContent=\`Stage 0/\${order.length}\`;}

  document.getElementById('nextBtn').addEventListener('click',()=>{idx=Math.min(idx+1,order.length-1);show(order[idx]);});
  document.getElementById('prevBtn').addEventListener('click',()=>{idx=Math.max(idx-1,-1);if(idx===-1)reset();else show(order[idx]);});
  document.getElementById('resetBtn').addEventListener('click',reset);
  parts.forEach(p=>p.addEventListener('click',e=>{e.stopPropagation();idx=order.indexOf(p.dataset.key);show(order[idx]);}));
  document.addEventListener('click',e=>{const inside=e.target.closest('.part,.panel,.fab,.ctrls');if(!inside)reset();});
  readBtn.addEventListener('click',e=>{e.stopPropagation();readMenu.classList.toggle('show');});
  document.addEventListener('click',()=>readMenu.classList.remove('show'));

  // Panel loaders
  function openInPanel(url,title){
    const panel=document.getElementById('panel');if(ghost) ghost.style.display='none';
    panel.innerHTML=\`<div class="card active"><h3>\${title}</h3>
      <p>Loaded inline. <a href="\${url}" target="_blank" rel="noopener">Open full page</a></p>
      <div style="border:1px solid #2a364d;border-radius:10px;overflow:hidden;max-height:60vh">
        <iframe src="\${url}" style="width:100%;height:60vh;border:0;background:#0a0f1c"></iframe>
      </div></div>\`;
  }
  document.getElementById('openOrth').addEventListener('click',()=>{readMenu.classList.remove('show');openInPanel('neuron/orthogonal-integration.html','Orthogonal Inputs (soma)');});
  document.getElementById('openAlign').addEventListener('click',()=>{readMenu.classList.remove('show');openInPanel('neuron/symbolic-alignment.html','Symbolic Chain Alignment');});

  reset();
})();
</script>
</body>
</html>
